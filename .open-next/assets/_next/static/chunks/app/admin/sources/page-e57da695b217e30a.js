(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{9313:(e,r,a)=>{Promise.resolve().then(a.bind(a,1269))},1269:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>b});var t=a(5155),s=a(2115),i=a(6676),l=a(3473),n=a(2800);let o=(0,n.A)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),d=(0,n.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var c=a(5765);let m=(0,n.A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),h=(0,n.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=(0,n.A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);var u=a(5686);function p(){let[e,r]=(0,s.useState)([]),[a,i]=(0,s.useState)(""),n=e=>{r(r=>r.filter(r=>r.id!==e))},p=async(e,a)=>{r(r=>r.map(r=>r.id===e?{...r,isSearching:!0}:r));try{var t,s;let i=await fetch("https://www.sefaria.org/api/search-wrapper",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,type:"text",field:"naive_lemmatizer",size:1})}),l=await i.json();if((null===(s=l.hits)||void 0===s?void 0:null===(t=s.hits)||void 0===t?void 0:t.length)>0){let a=l.hits.hits[0]._source.ref,t=await fetch("https://www.sefaria.org/api/texts/".concat(encodeURIComponent(a),"?context=0")),s=await t.json();r(r=>r.map(r=>r.id===e?{...r,sefariaRef:a,sefariaText:Array.isArray(s.he)?s.he.join(" "):s.he,isSearching:!1}:r))}else r(r=>r.map(r=>r.id===e?{...r,isSearching:!1}:r)),alert("No results found in Sefaria")}catch(a){console.error("Sefaria search error:",a),r(r=>r.map(r=>r.id===e?{...r,isSearching:!1}:r)),alert("Error searching Sefaria")}};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(l.A,{className:"w-5 h-5 text-primary"}),"Add Source"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("textarea",{value:a,onChange:e=>i(e.target.value),placeholder:"Paste or type a source reference here (e.g., 'Bereishis 1:1' or 'רמב״ם הלכות תשובה פרק א')...",className:"w-full h-32 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-primary focus:border-primary text-lg",dir:"auto"}),(0,t.jsxs)("button",{onClick:()=>{if(!a.trim())return;let e={id:crypto.randomUUID(),text:a.trim()};r(r=>[...r,e]),i("")},disabled:!a.trim(),className:"w-full md:w-auto px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,t.jsx)(l.A,{className:"w-5 h-5"}),"Add Source"]})]})]}),e.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(o,{className:"w-5 h-5 text-primary"}),"Sources (",e.length,")"]}),(0,t.jsx)("button",{onClick:()=>{let r=e.map((e,r)=>{let a="".concat(r+1,". ").concat(e.text);return e.sefariaRef&&(a+="\n   \uD83D\uDCDA ".concat(e.sefariaRef)),e.sefariaText&&(a+="\n   ".concat(e.sefariaText)),a}).join("\n\n");navigator.clipboard.writeText(r),alert("Sources copied to clipboard!")},className:"px-4 py-2 text-sm font-medium text-primary border border-primary rounded-lg hover:bg-primary/5 transition-colors",children:"Copy All Formatted"})]}),(0,t.jsx)("div",{className:"space-y-4",children:e.map((e,r)=>(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center font-bold text-sm",children:r+1}),(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-gray-500 uppercase mb-1 block",children:"Source Text"}),(0,t.jsx)("p",{className:"text-lg text-gray-900 font-serif leading-relaxed",dir:"auto",children:e.text})]}),e.sefariaRef&&(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(d,{className:"w-4 h-4 text-green-600"}),(0,t.jsxs)("a",{href:"https://www.sefaria.org/".concat(encodeURIComponent(e.sefariaRef)),target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-blue-700 hover:underline flex items-center gap-1",children:[e.sefariaRef,(0,t.jsx)(c.A,{className:"w-3 h-3"})]})]}),e.sefariaText&&(0,t.jsx)("p",{className:"text-gray-800 font-serif text-right leading-relaxed",dir:"rtl",children:e.sefariaText})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)("button",{onClick:()=>p(e.id,e.text),disabled:e.isSearching,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-[#212f4d] rounded-lg hover:bg-[#212f4d]/90 transition-colors disabled:opacity-50",children:[e.isSearching?(0,t.jsx)(m,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(h,{className:"w-4 h-4"}),e.isSearching?"Searching...":"Find in Sefaria"]}),(0,t.jsxs)("a",{href:"https://hebrewbooks.org/search?c=1&q=".concat(encodeURIComponent(e.text.substring(0,50))),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(x,{className:"w-4 h-4"}),"Search HebrewBooks"]}),(0,t.jsxs)("button",{onClick:()=>n(e.id),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-red-600 bg-white border border-red-200 rounded-lg hover:bg-red-50 transition-colors ml-auto",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"Remove"]})]})]})]})},e.id))})]}),0===e.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(o,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"No sources added yet"}),(0,t.jsx)("p",{className:"text-sm",children:"Add a source above to get started"})]})]})}var f=a(8173),g=a.n(f);let y=(0,n.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function b(){let[e,r]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{n()},[]);let n=async()=>{try{(await fetch("/api/auth/check")).ok&&r(!0)}catch(e){console.error("Auth check failed:",e)}finally{l(!1)}};return a?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(g(),{href:"/admin",className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-600",children:(0,t.jsx)(y,{className:"w-5 h-5"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-primary",children:"Source Manager"})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,t.jsx)(p,{})})]}):(0,t.jsx)(i.A,{onSuccess:()=>r(!0)})}},6676:(e,r,a)=>{"use strict";a.d(r,{A:()=>n});var t=a(5155),s=a(2115),i=a(8173),l=a.n(i);function n(e){let{onSuccess:r}=e,[a,i]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),x=async e=>{e.preventDefault(),c(""),h(!0);try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})}),t=await e.json();if(!e.ok){let e=t.error||"Login failed";c(e),console.error("Login error:",e);return}r()}catch(e){c("An error occurred. Please try again.")}finally{h(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-center mb-8 text-primary",children:"Admin Login"}),(0,t.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[d&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:d}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",value:a,onChange:e=>i(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:n,onChange:e=>o(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"w-full py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Logging in...":"Login"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(l(),{href:"/",className:"text-sm text-primary hover:underline",children:"← Back to Home"})})]})})}},2800:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var t=a(2115),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,r)=>{let a=(0,t.forwardRef)((a,l)=>{let{color:n="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:m="",children:h,...x}=a;return(0,t.createElement)("svg",{ref:l,...s,width:o,height:o,stroke:n,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(i(e)),m].join(" "),...x},[...r.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},5765:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2800).A)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},3473:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2800).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5686:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2800).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[173,441,517,358],()=>r(9313)),_N_E=e.O()}]);