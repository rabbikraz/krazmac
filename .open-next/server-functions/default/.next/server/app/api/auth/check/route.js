(()=>{var e={};e.id=521,e.ids=[521],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3892:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>w,routeModule:()=>m,serverHooks:()=>f,workAsyncStorage:()=>q,workUnitAsyncStorage:()=>h});var r={};a.r(r),a.d(r,{GET:()=>c});var n=a(2706),s=a(8203),u=a(5994),o=a(9187),i=a(4512),d=a(2545),l=a(6980),p=a(7579);async function c(e){try{let e=await (0,d.x8)();if(!e)return o.NextResponse.json({error:"Database not configured",authenticated:!1},{status:500});let t=(await (0,i.UL)()).get("admin-session");if(!t)return o.NextResponse.json({authenticated:!1},{status:401});let a=(0,d.Lf)(e),r=await a.select({id:l.users.id,email:l.users.email,name:l.users.name}).from(l.users).where((0,p.eq)(l.users.id,t.value)).get();if(!r)return o.NextResponse.json({authenticated:!1},{status:401});return o.NextResponse.json({authenticated:!0,user:{id:r.id,email:r.email,name:r.name}})}catch(e){return console.error("Auth check error:",e),o.NextResponse.json({error:"Internal server error",authenticated:!1},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/auth/check/route",pathname:"/api/auth/check",filename:"route",bundlePath:"app/api/auth/check/route"},resolvedPagePath:"C:\\Users\\alk77\\Downloads\\krazywaz-master\\krazywaz-master\\Downloads\\krazywaz\\krazzzzz\\app\\api\\auth\\check\\route.ts",nextConfigOutput:"standalone",userland:r}),{workAsyncStorage:q,workUnitAsyncStorage:h,serverHooks:f}=m;function w(){return(0,u.patchFetch)({workAsyncStorage:q,workUnitAsyncStorage:h})}},6487:()=>{},8335:()=>{},2545:(e,t,a)=>{"use strict";a.d(t,{Lf:()=>s,x8:()=>u});var r=a(1205),n=a(6980);function s(e){return(0,r.f)(e,{schema:n})}async function u(){try{let{getCloudflareContext:e}=await a.e(535).then(a.bind(a,6535)),t=await e(),r=t?.env;if(r?.DB)return r.DB}catch(e){}return globalThis.DB?globalThis.DB:null}},6980:(e,t,a)=>{"use strict";a.r(t),a.d(t,{platformLinks:()=>i,shiurim:()=>o,users:()=>u});var r=a(3137),n=a(3161),s=a(7095);let u=(0,r.D)("users",{id:(0,n.Qq)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),email:(0,n.Qq)("email").notNull().unique(),password:(0,n.Qq)("password").notNull(),name:(0,n.Qq)("name"),createdAt:(0,s.nd)("created_at",{mode:"timestamp"}).notNull().$defaultFn(()=>new Date),updatedAt:(0,s.nd)("updated_at",{mode:"timestamp"}).notNull().$defaultFn(()=>new Date).$onUpdate(()=>new Date)}),o=(0,r.D)("shiurim",{id:(0,n.Qq)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),guid:(0,n.Qq)("guid").notNull().unique(),slug:(0,n.Qq)("slug").unique(),title:(0,n.Qq)("title").notNull(),description:(0,n.Qq)("description"),blurb:(0,n.Qq)("blurb"),audioUrl:(0,n.Qq)("audio_url").notNull(),sourceDoc:(0,n.Qq)("source_doc"),pubDate:(0,s.nd)("pub_date",{mode:"timestamp"}).notNull(),duration:(0,n.Qq)("duration"),link:(0,n.Qq)("link"),thumbnail:(0,n.Qq)("thumbnail"),createdAt:(0,s.nd)("created_at",{mode:"timestamp"}).notNull().$defaultFn(()=>new Date),updatedAt:(0,s.nd)("updated_at",{mode:"timestamp"}).notNull().$defaultFn(()=>new Date).$onUpdate(()=>new Date)}),i=(0,r.D)("platform_links",{id:(0,n.Qq)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),shiurId:(0,n.Qq)("shiur_id").notNull().unique().references(()=>o.id,{onDelete:"cascade"}),youtube:(0,n.Qq)("youtube"),youtubeMusic:(0,n.Qq)("youtube_music"),spotify:(0,n.Qq)("spotify"),apple:(0,n.Qq)("apple"),amazon:(0,n.Qq)("amazon"),pocket:(0,n.Qq)("pocket"),twentyFourSix:(0,n.Qq)("twenty_four_six"),castbox:(0,n.Qq)("castbox"),createdAt:(0,s.nd)("created_at",{mode:"timestamp"}).notNull().$defaultFn(()=>new Date),updatedAt:(0,s.nd)("updated_at",{mode:"timestamp"}).notNull().$defaultFn(()=>new Date).$onUpdate(()=>new Date)})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,920,452,512],()=>a(3892));module.exports=r})();